---

# Docker - https://docs.docker.com/engine/installation/linux/ubuntu/#install-using-the-repository

- name: "Docker dependencies install"
  apt:
    name:
      - apt-transport-https
      - ca-certificates
      - curl
      - software-properties-common
    state: latest
  sudo: yes

- name: "Docker GPG key"
  apt_key:
    url: "{{ docker_gpg_url }}"
    state: present
  sudo: yes

- name: "Docker repository"
  apt_repository:
    repo: "{{ docker_repo }}"
    state: present
    filename: 'docker'
    update_cache: yes
  sudo: yes

- name: "Docker install"
  apt:
    name: docker-ce
    state: latest
  sudo: yes

- name: "Create Docker group"
  group:
    name: docker
    state: present
  sudo: yes

- name: "Add user to docker group"
  user:
    name: "{{ ansible_env.USER }}"
    groups: docker
    append: yes
  sudo: yes
